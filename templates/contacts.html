{{ template "layout.html" . }}
{{ define "title" }}Contact List{{ end }}

{{ define "content" }}
  <header>
    <h2>Contact List</h2>
  </header>

  <hr/>

  <form action="/contacts" method="get">
    <label for="search">Search Term</label>
    <input id="search" type="search" name="q" value="{{ .SearchTerm }}"/>
    <input type="submit" value="Search"/>
  </form>

  <table>
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {{ range .Contacts }}
        <tr>
          <td>{{ .FirstName }}</td>
          <td>{{ .LastName }}</td>
          <td>{{ .Phone }}</td>
          <td>{{ .Email }}</td>
          <td>
            <a href="/contacts/{{ .Id }}/edit">Edit</a>
            <a href="/contacts/{{ .Id }}">View</a>
          </td>
        </tr>
      {{ else }}
        <tr>
          <td colspan="5">No contacts found.</td>
        </tr>
      {{ end }}
    </tbody>
  </table>

  <div style="margin-top: 10px;">
    <span style="float: right;">
      {{ if gt .Page 0 }}
        <a href="/contacts?page={{ sub .Page 1 }}{{ if .SearchTerm }}&q={{ .SearchTerm }}{{ end }}">Previous</a>
      {{ end }}

      {{ $length := len .Contacts }} {{ if gt $length 9 }}
        <a href="/contacts?page={{ add .Page 1 }}{{ if .SearchTerm }}&q={{ .SearchTerm }}{{ end }}">Next</a>
      {{ end }}
    </span>
  </div>

  <p>
    <a href="/contacts/new">Add Contact</a>
  </p>

  <footer>
    <p>There's some foot in my footer</p>
  </footer>
{{ end }}

